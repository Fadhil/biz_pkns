.page-header
  %h1="#{t('.title')} #{if current_consultant && current_consultant.program then current_consultant.program.name end}"

.pagination-left
  = paginate @courses


%table.table.table-striped
  %thead
    %tr
      %th
        = t('course_name')
      %th(width="30%")
        = t('description')
      %th
        = t('program_name')
      %th
        = t('start_date')
      %th
        = t('end_date')
      %th
        = t('active')
      %th
        = t('.share') 
      %th
      
    %tbody
      - @courses.each do |course|
        %tr
          %td
            = link_to course.name, course_path(course)
          %td
            =# course.description
            = truncate(course.description, :length => 80)
          %td
            = course.program.name unless course.program.nil?
          %td
            = course.start_date
          %td
            = course.end_date
          %td
            = course.status? ? t('active') : t('inactive')
          %td
            =# mail_to t('share', :default => t("helpers.links.share")),
                          course_path(course), :class => 'btn btn-mini' 
            = mail_to "example@example.com", t('.share'), :subject => "Ada kursus menarik dari PKNS - #{course.program.name}", :body => "Ada kursus menarik dari PKNS. Sila lewati #{"http://"+request.host+course_path(course)}. \n\nAnda perlu berdaftar dengan BizClub untuk hadiri kursus. \n\nMaklumat Kursus \nKursus : #{course.program.name} \nHuraian : #{course.program.description} \nTarikh : #{course.start_date}", :class => 'btn btn-mini', :encode => "javascript"
          %td
            = link_to t('view', :default => t("helpers.links.edit")),
                          course_path(course), :class => 'btn btn-mini' 
            - if can? :destroy, Course
              =link_to t('destroy', :default => t("helpers.links.destroy")),
                              course_path(course),
                              :method => :delete,
                              :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => t('are_you_sure'))) },
                              :class => 'btn btn-mini btn-danger'

.pagination-left
  = paginate @courses

- if can? :manage, Course
  = link_to t('.create_course', :default => t("helpers.links.new")), new_course_path, :class => 'btn btn-primary' 
